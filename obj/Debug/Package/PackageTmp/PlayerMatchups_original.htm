            <!doctype html>
            <html>
            <head>    
                <title id="title">Player Matchups</title>    
                <meta name='viewport' content='width=device-width, initial-scale=1'>    
                <link rel="stylesheet"  href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
                <script src='http://code.jquery.com/jquery-1.8.2.min.js'></script>    
                <script src='../jquery.mobile-1.3.1/jquery.mobile-1.3.1.min.js'></script>
                <link rel="stylesheet"  href="../css/dwise.css" />
                
                <script src="../Scripts/jquery.cookie.js"></script>
                <script language='javascript'>
                    $(document).bind('pagechange', function (event) {
                        $('.ui-page-active .eventHeader').text($.cookie("GolfEventName"));
                        $('.ui-page-active .teamHeader').text($.cookie("GolfTeamName"));
                    });

                    $(window).load(function () {
                        $.mobile.loading('show');
                        $.mobile.popup.prototype.options.history = false;
                       // debugger;
                    });

                    function refreshPage() {
                        location.reload();
                    }

                </script>
            </head>
                <body>    
                <div data-role='page' id="matchups" >   
                <div data-role='header' id="Div8" data-theme='e'>
                    <div data-role="navbar" data-theme ="e">
                        <ul class="custom-navbar ui-grid-e" >
                            <li><a href="javascript:history.go(-1)" data-icon="back" data-direction="reverse" data-mini="true">Back</a></li>
                            <li><a href="default.htm" rel="external" data-mini="true" data-icon="home" data-direction="reverse">Home</a></li>
                            <li></li>
                            <li></li>
                            <li><a href='javascript:refreshPage()' data-icon="refresh" data-mini="true">Refresh</a></li>
                        </ul>
                    </div>
                    <div  data-role='footer' class="ui-grid-a" style="height:60px">
                        <div id="pageHeaderHeader1"  class="ui-block-a"></div> 
                        <div id="pageHeaderFooter1" class="ui-block-b">
                        <div data-role="fieldcontain"> 
                                    <select  class="select_choice" data-native-menu="false" id="teamsappointed">
                                    </select>
                                </div>
                        </div>
                    </div>
                </div>
                <div data-role='content' id='dBets'></div>
                <div data-role='footer' class="ui-grid-d">
                    
                </div>
                <script src="../Scripts/GetURLParameters.js"></script>
            
                    
            
                <script src="../Scripts/jquery.cookie.js"></script>
                <script src="../Scripts/PlayerMatchups.js"></script>
                <script language = 'javascript'>

                    $("#matchups").on('pageinit', function () {
                         debugger;
                        var urlParameters = getUrlVarsPage('matchups');
                        var PlayerMatchupId;
                        var GolfTeamId;
                        if (urlParameters != "") {
                            if (urlParameters.PlayerMatchupId != null) {
                                PlayerMatchupId = urlParameters.PlayerMatchupId
                            }

                            if (urlParameters.GolfTeamId != null) {
                                GolfTeamId = urlParameters.GolfTeamId
                            }

                           // $.mobile.changePage("puSideBet.htm?PlayerMatchupId=" + PlayerMatchupId + "&GolfTeamId=" + GolfTeamId, { role: "dialog" });
                        }

                        loadMatchups($.cookie("GolfTeamId").toString());
                        loadGolfTeams($.cookie("GolfTeamId").toString());
                        $('.ui-page-active :jqmData(role=content)').trigger('create');

                    });

//                    $("#matchups").on('pageinit', function () {
//                        loadMatchups($.cookie("GolfTeamId").toString());
//                        loadGolfTeams($.cookie("GolfTeamId").toString());
//                        $('.ui-page-active :jqmData(role=content)').trigger('create');
//                    });

                    $("#matchups").on('pageshow', function () {
                        $('.ui-page-active :jqmData(role=content)').trigger('create');
                    });


                    function betPopup(playerMatchupId, golfTeamId) {
                         // debugger;
                        $.mobile.changePage("puSideBet.htm?PlayerMatchupId=" + playerMatchupId + "&GolfTeamId=" + golfTeamId, { role: "dialog" });
                    }

                    function loadGolfTeams(golfTeamId) {
                           //   debugger;
                        $.ajax(
                        {
                            beforeSend: function () { $.mobile.loading("show"); }, //Show spinner
                            complete: function () { $.mobile.loading("hide"); }, //Hide spinner
                            type: "POST",
                            datatype: "xml",
                            url: "../Golf.EventDraft.asmx/GolfTeamDelegates",
                            data: { GolfTeamId: golfTeamId },
                            success: function (xml) {
                                populateGolfTeams(xml);
                            },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {
                                alert(errorThrown);
                            }
                        });
                    }

                    function populateGolfTeams(xml) {
                        var index = 0;
                        var i = 0;
                        var loggedInGolfTeamId = $.cookie("GolfTeamId").toUpperCase();
                        $(xml).find("GolfTeam").each(
                        function () {
                            var xmlGolfTeamId = $(this).find("GolfTeamId").first().text().toUpperCase();
                            var xmlGolfTeamName = $(this).find("GolfTeamName").first().text();

                            if (xmlGolfTeamId == loggedInGolfTeamId && $(this)[0].parentNode.nodeName == "GolfTeams") {
                                //Append Logged In Team First
                                $('#teamsappointed').append($('<option/>',
                                {
                                    'text': xmlGolfTeamName,
                                    'value': xmlGolfTeamId + ":" + xmlGolfTeamName
                                }));

                                //Append Delagated Teams
                                $(this).find("Delegates").find("GolfTeam").each(
                                function () {
                                    var dGolfTeamId = $(this).find("GolfTeamId").text().toUpperCase();
                                    var dGolfTeamName = $(this).find("GolfTeamName").text();
                                    $('#teamsappointed').append($('<option/>',
                                        {
                                            'text': dGolfTeamName,
                                            'value': dGolfTeamId + ":" + dGolfTeamName
                                        }));
                                });
                            }
                        });

                        var myselect = $("#teamsappointed");
                        myselect[0].selectedIndex = 0;
                        $('#teamsappointed').selectmenu('refresh');
                    }


                    $("#teamsappointed").on("change", function () {
                        var GolfInfo = $(this).val().split(":");
//                        $.cookie("GolfTeamId", GolfInfo[0], { expires: 1000, path: '/' });
//                        $.cookie("GolfTeamName", GolfInfo[1], { expires: 1000, path: '/' });
                        loadMatchups(GolfInfo[0]);
                        $('.ui-page-active :jqmData(role=content)').trigger('create');
                    });
                   
            </script>  
        </div><!-- /page -->
    </body>
</html>
