<!doctype html>
<html>
    <head>    
        <title>U.S. Open</title>    
        <meta name='viewport' content='width=device-width, initial-scale=1'>    
        <link rel='stylesheet' href='http://www.dwise.net/css/jquery.mobile-1.2.0.css'>    
               
        <script src='http://code.jquery.com/jquery-1.8.2.min.js'></script>    
        <script src='http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js'></script>
        
        <script src="../Scripts/jquery.cookie.js"></script>
        <script language = 'javascript'>
            function test() {
                $.ajax(
                        {
                            type: "POST",
                            datatype: "xml",
                            url: "http://localhost:62133/webservice1.asmx/DraftGolfer",
                            data: { EventOddsId: "C796BCCB-AAD7-E211-BDB6-3EBB89D5579F" },
                            success: function (xml) { xmlParser(xml); },
                            error: function (XMLHttpRequest, textStatus, errorThrown) {alert(errorThrown);
                         }
                        });
            }

            function xmlParser(xml)
            {
                    $(xml).find("Event").each(
                    function ()
                    {
                        $("#details").append($(this).find("Name").text() + "</br>"+ $(this).find("StartDate").text());
                    })
            }

            $(document).ready(function () {
//                debugger;
                var urlParameters = getUrlVars();
                if (urlParameters != "")
                    $.cookie("GolfTeamId", urlParameters.contactid, { expires: 1000 });
                else
                    alert($.cookie("GolfTeamId"));
                                        //$('#details').val($.cookie('contactId'));
            });

            function getUrlVars() {
                var vars = [], hash;
                var hashes;
                if ($.mobile.activePage.data('url').indexOf("?") != -1) {
                    // first check the active page url for parameters           
                    hashes = $.mobile.activePage.data('url').slice($.mobile.activePage.data('url').indexOf('?') + 1).split('&');
                }
                else { // otherwise just get the current url           
                    hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
                }
                for (var i = 0; i < hashes.length; i++) {
                    hash = hashes[i].split('=');
                    if (hash.length > 1 && hash[1].indexOf("#") == -1) {
                        // filter out misinterpreted paramters caused by JQM url naming scheme                
                        vars.push(hash[0]);
                        vars[hash[0]] = hash[1];
                    }
                }
                return vars;
            }

        </script>
    </head>
    <body>    
            <div data-role='page'>         
                <div data-role='header' data-theme='b'>
                    <h1>U.S. Open</h1>        
                    <a href='javascript:history.go(-1)'>Back</a>   
                        <a href='javascript:location.reload()'>Refresh</a>
                        <button onclick="test()">Test</button>
                </div>
                <div data-role='content-primary'>
                    <h2></h2>
                    <ul data-role='listview' data-inset='true'>
                        <li><a href='Teams/Teams.html'>Teams</a></li>
                        <li><a href='GolferLeaderboard/GolferLeaderboard.html'>Leaderboard</a><span class='ui-li-count'>Hunter Mahan/Wise Up @ 0</span></li>
                        <li><a href='TeamTop2/TeamTop2.html'>Team Top 2</a><span class='ui-li-count'>Footelong @ 5</span></li>
                        <li><a href='BestBall/Thursday/Teams.html'>Best Ball Thursday</a><span class='ui-li-count'>Captain America 61 *TB Hole #18</span></li>
                        <li><a href='BestBall/Friday/Teams.html'>Best Ball Friday</a><span class='ui-li-count'>Footelong 60</span></li>
                        <li><a href='Skins/Saturday/Skins.html'>Skins Saturday</a><span class='ui-li-count'>3</span></li>
                        <li><a href='Skins/Sunday/Skins.html'>Skins Sunday</a><span class='ui-li-count'>7</span></li>
                    </ul>
                </div>

                <div data-role='footer'>            
                    <p id="details"></p>
                </div>
                <!-- /footer -->     
            </div>
            <!-- /page -->
    </body>
</html>
