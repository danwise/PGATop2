/*
 * iosSlider - http://iosscripts.com/iosslider/
 * 
 * Touch Enabled, Responsive jQuery Horizontal Content Slider/Carousel/Image Gallery Plugin
 *
 * A jQuery plugin which allows you to integrate a customizable, cross-browser 
 * content slider into your web presence. Designed for use as a content slider, carousel, 
 * scrolling website banner, or image gallery.
 * 
 * Copyright (c) 2013 Marc Whitbread
 * 
 * Version: v1.3.0 (06/25/2013) (Demo Version)
 * Minimum requirements: jQuery v1.4+
 *
 * Advanced requirements:
 * 1) jQuery bind() click event override on slide requires jQuery v1.6+
 *
 * Terms of use:
 *
 * 1) iosSlider is licensed under the Creative Commons â€“ Attribution-NonCommercial 3.0 License.
 * 2) You may use iosSlider free for personal or non-profit purposes, without restriction.
 *	  Attribution is not required but always appreciated. For commercial projects, you
 *	  must purchase a license. You may download and play with the script before deciding to
 *	  fully implement it in your project. Making sure you are satisfied, and knowing iosSlider
 *	  is the right script for your project is paramount.
 * 3) You are not permitted to make the resources found on iosscripts.com available for
 *    distribution elsewhere "as is" without prior consent. If you would like to feature
 *    iosSlider on your site, please do not link directly to the resource zip files. Please
 *    link to the appropriate page on iosscripts.com where users can find the download.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
 * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE
 * GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED
 * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED
 * OF THE POSSIBILITY OF SUCH DAMAGE. 
 */
 
(function(b){var ma=0,V=0,ca=0,K=0,Ba="ontouchstart"in window,Ca="onorientationchange"in window,da=!1,$=!1,W=!1,na=!1,ga="pointer",ra="pointer",ha=[],S=[],sa=[],Z=[],A=[],aa=[],z=[],h=[],q=[],ta=[],ea=[],e={showScrollbar:function(a,e){a.scrollbarHide&&b("."+e).css({opacity:a.scrollbarOpacity,filter:"alpha(opacity:"+100*a.scrollbarOpacity+")"})},hideScrollbar:function(b,f,c,u,g,d,h,q,A,z){if(b.scrollbar&&b.scrollbarHide)for(var r=c;r<c+25;r++)f[f.length]=e.hideScrollbarIntervalTimer(10*r,u[c],(c+24- r)/24,g,d,h,q,A,z,b)},hideScrollbarInterval:function(a,f,c,u,g,d,h,A,z){K=-1*a/q[A]*(g-d-h-u);e.setSliderOffset("."+c,K);b("."+c).css({opacity:z.scrollbarOpacity*f,filter:"alpha(opacity:"+100*z.scrollbarOpacity*f+")"})},slowScrollHorizontalInterval:function(a,f,c,u,g,d,J,N,M,G,r,w,x,v,t,n,F,m,l){if(l.infiniteSlider){if(c<=-1*q[n]){var p=b(a).width();if(c<=-1*ta[n]){var s=-1*r[0];b(f).each(function(c){e.setSliderOffset(b(f)[c],s+F);c<w.length&&(w[c]=-1*s);s+=t[c]});c+=-1*w[0];h[n]=-1*w[0]+F;q[n]=h[n]+ p-d;z[n]=0}else{var k=0,B=e.getSliderOffset(b(f[0]),"x");b(f).each(function(b){e.getSliderOffset(this,"x")<B&&(B=e.getSliderOffset(this,"x"),k=b)});x=h[n]+p;e.setSliderOffset(b(f)[k],x);h[n]=-1*w[1]+F;q[n]=h[n]+p-d;w.splice(0,1);w.splice(w.length,0,-1*x+F);z[n]++}}if(c>=-1*h[n]||0<=c){p=b(a).width();if(0<=c){s=-1*r[0];b(f).each(function(c){e.setSliderOffset(b(f)[c],s+F);c<w.length&&(w[c]=-1*s);s+=t[c]});c-=-1*w[0];h[n]=-1*w[0]+F;q[n]=h[n]+p-d;for(z[n]=v;0<-1*w[0]-p+F;){var y=0,I=e.getSliderOffset(b(f[0]), "x");b(f).each(function(c){e.getSliderOffset(this,"x")>I&&(I=e.getSliderOffset(this,"x"),y=c)});x=h[n]-t[y];e.setSliderOffset(b(f)[y],x);w.splice(0,0,-1*x+F);w.splice(w.length-1,1);h[n]=-1*w[0]+F;q[n]=h[n]+p-d;z[n]--;A[n]++}}0>c&&(y=0,I=e.getSliderOffset(b(f[0]),"x"),b(f).each(function(c){e.getSliderOffset(this,"x")>I&&(I=e.getSliderOffset(this,"x"),y=c)}),x=h[n]-t[y],e.setSliderOffset(b(f)[y],x),w.splice(0,0,-1*x+F),w.splice(w.length-1,1),h[n]=-1*w[0]+F,q[n]=h[n]+p-d,z[n]--)}}r=!1;d=e.calcActiveOffset(l, c,w,d,z[n],v,G,n);x=(d+z[n]+v)%v;l.infiniteSlider?x!=aa[n]&&(r=!0):d!=A[n]&&(r=!0);if(r&&(v=new e.args("change",l,a,b(a).children(":eq("+x+")"),x,m),b(a).parent().data("args",v),""!=l.onSlideChange))l.onSlideChange(v);A[n]=d;aa[n]=x;c=Math.floor(c);e.setSliderOffset(a,c);l.scrollbar&&(K=Math.floor((-1*c-h[n]+F)/(q[n]-h[n]+F)*(J-N-g)),a=g-M,c>=-1*h[n]+F?(a=g-M- -1*K,e.setSliderOffset(b("."+u),0)):(c<=-1*q[n]+1&&(a=J-N-M-K),e.setSliderOffset(b("."+u),K)),b("."+u).css({width:a+"px"}))},slowScrollHorizontal:function(a, f,c,u,g,d,J,N,M,G,r,w,x,v,t,n,F,m,l,p,s){var k=e.getSliderOffset(a,"x");d=[];var B=0,y=25/1024*N;frictionCoefficient=s.frictionCoefficient;elasticFrictionCoefficient=s.elasticFrictionCoefficient;snapFrictionCoefficient=s.snapFrictionCoefficient;g>s.snapVelocityThreshold&&s.snapToChildren&&!l?B=1:g<-1*s.snapVelocityThreshold&&(s.snapToChildren&&!l)&&(B=-1);g<-1*y?g=-1*y:g>y&&(g=y);b(a)[0]!==b(m)[0]&&(B*=-1,g*=-2);m=z[t];if(s.infiniteSlider)var I=h[t],j=q[t];l=[];for(var y=[],E=0;E<x.length;E++)l[E]= x[E],E<f.length&&(y[E]=e.getSliderOffset(b(f[E]),"x"));for(;1<g||-1>g;){g*=frictionCoefficient;k+=g;if((k>-1*h[t]||k<-1*q[t])&&!s.infiniteSlider)g*=elasticFrictionCoefficient,k+=g;if(s.infiniteSlider){if(k<=-1*j){for(var j=b(a).width(),K=0,P=y[0],E=0;E<y.length;E++)y[E]<P&&(P=y[E],K=E);E=I+j;y[K]=E;I=-1*l[1]+p;j=I+j-N;l.splice(0,1);l.splice(l.length,0,-1*E+p);m++}if(k>=-1*I){j=b(a).width();K=0;P=y[0];for(E=0;E<y.length;E++)y[E]>P&&(P=y[E],K=E);E=I-v[K];y[K]=E;l.splice(0,0,-1*E+p);l.splice(l.length- 1,1);I=-1*l[0]+p;j=I+j-N;m--}}d[d.length]=k}y=!1;g=e.calcActiveOffset(s,k,l,N,m,F,A[t],t);I=(g+m+F)%F;s.snapToChildren&&(s.infiniteSlider?I!=aa[t]&&(y=!0):g!=A[t]&&(y=!0),0>B&&!y?(g++,g>=x.length&&!s.infinteSlider&&(g=x.length-1)):0<B&&!y&&(g--,0>g&&!s.infinteSlider&&(g=0)));if(s.snapToChildren||(k>-1*h[t]||k<-1*q[t])&&!s.infiniteSlider){(k>-1*h[t]||k<-1*q[t])&&!s.infiniteSlider?d.splice(0,d.length):(d.splice(0.1*d.length,d.length),k=0<d.length?d[d.length-1]:k);for(;k<l[g]-0.5||k>l[g]+0.5;)k=(k-l[g])* snapFrictionCoefficient+l[g],d[d.length]=k;d[d.length]=l[g]}B=1;0!=d.length%2&&(B=0);for(k=0;k<c.length;k++)clearTimeout(c[k]);m=(g+m+F)%F;I=0;for(k=B;k<d.length;k+=2)if(k==B||1<Math.abs(d[k]-I)||k>=d.length-2)I=d[k],c[c.length]=e.slowScrollHorizontalIntervalTimer(10*k,a,f,d[k],u,J,N,M,G,r,g,w,x,n,F,v,t,p,m,s);I=(g+z[t]+F)%F;""!=s.onSlideComplete&&1<d.length&&(c[c.length]=e.onSlideCompleteTimer(10*(k+1),s,a,b(a).children(":eq("+I+")"),m,t));Z[t]=c;e.hideScrollbar(s,c,k,d,u,J,N,G,r,t)},onSlideComplete:function(a, f,c,u){c=new e.args("complete",a,b(f),c,u,u);b(f).parent().data("args",c);if(""!=a.onSlideComplete)a.onSlideComplete(c)},getSliderOffset:function(a,e){var c=0;e="x"==e?4:5;if(da&&!$&&!W){for(var c=["-webkit-transform","-moz-transform","transform"],u=0;u<c.length;u++)if(void 0!=b(a).css(c[u])&&0<b(a).css(c[u]).length){var g=b(a).css(c[u]).split(",");break}c=parseInt(g[e],10)}else c=parseInt(b(a).css("left"),10);return c},setSliderOffset:function(a,e){da&&!$&&!W?b(a).css({webkitTransform:"matrix(1,0,0,1,"+ e+",0)",MozTransform:"matrix(1,0,0,1,"+e+",0)",transform:"matrix(1,0,0,1,"+e+",0)"}):b(a).css({left:e+"px"})},setBrowserInfo:function(){null!=navigator.userAgent.match("WebKit")?(ga="-webkit-grab",ra="-webkit-grabbing"):null!=navigator.userAgent.match("Gecko")?(ga="move",ra="-moz-grabbing"):null!=navigator.userAgent.match("MSIE 7")?na=$=!0:null!=navigator.userAgent.match("MSIE 8")?na=W=!0:null!=navigator.userAgent.match("MSIE 9")&&(na=!0)},has3DTransform:function(){var a=!1,e=b("<div />").css({webkitTransform:"matrix(1,1,1,1,1,1)", MozTransform:"matrix(1,1,1,1,1,1)",transform:"matrix(1,1,1,1,1,1)"});""==e.attr("style")?a=!1:void 0!=e.attr("style")&&(a=!0);return a},getSlideNumber:function(b,e,c){return(b-z[e]+c)%c},calcActiveOffset:function(b,e,c,u,g,d){g=!1;b=[];var h;e>c[0]&&(h=0);e<c[c.length-1]&&(h=d-1);for(d=0;d<c.length;d++)c[d]<=e&&c[d]>e-u&&(!g&&c[d]!=e&&(b[b.length]=c[d-1]),b[b.length]=c[d],g=!0);0==b.length&&(b[0]=c[c.length-1]);for(d=g=0;d<b.length;d++){var q=Math.abs(e-b[d]);q<u&&(g=b[d],u=q)}for(d=0;d<c.length;d++)g== c[d]&&(h=d);return h},changeSlide:function(a,f,c,u,g,d,h,q,M,G,r,w,x,v,t,n,F,m){e.autoSlidePause(v);for(var l=0;l<u.length;l++)clearTimeout(u[l]);var p=Math.ceil(m.autoSlideTransTimer/10)+1,s=e.getSliderOffset(f,"x"),k=w[a],k=k-s,B=a-(A[v]+z[v]+n)%n;if(m.infiniteSlider){a=(a-z[v]+2*n)%n;l=!1;0==a&&2==n&&(a=n,w[a]=w[a-1]-b(c).eq(0).outerWidth(!0),l=!0);var k=w[a],k=k-s,y=[w[a]-b(f).width(),w[a]+b(f).width()];l&&w.splice(w.length-1,1);for(l=0;l<y.length;l++)Math.abs(y[l]-s)<Math.abs(k)&&(k=y[l]-s); 0>k&&-1==B?k+=b(f).width():0<k&&1==B&&(k-=b(f).width())}B=[];e.showScrollbar(m,g);for(l=0;l<=p;l++)y=l,y/=p,y--,y=s+k*(Math.pow(y,5)+1),B[B.length]=y;p=(a+z[v]+n)%n;for(l=s=0;l<B.length;l++){if(0==l||1<Math.abs(B[l]-s)||l>=B.length-2)s=B[l],u[l]=e.slowScrollHorizontalIntervalTimer(10*(l+1),f,c,B[l],g,d,h,q,M,G,a,r,w,t,n,x,v,F,p,m);0==l&&""!=m.onSlideStart&&(p=(A[v]+z[v]+n)%n,m.onSlideStart(new e.args("start",m,f,b(f).children(":eq("+p+")"),p,a)))}s=!1;m.infiniteSlider?p!=aa[v]&&(s=!0):a!=A[v]&&(s= !0);s&&""!=m.onSlideComplete&&(u[u.length]=e.onSlideCompleteTimer(10*(l+1),m,f,b(f).children(":eq("+p+")"),p,v));Z[v]=u;e.hideScrollbar(m,u,l,B,g,d,h,M,G,v);e.autoSlide(f,c,u,g,d,h,q,M,G,r,w,x,v,t,n,F,m)},autoSlide:function(b,f,c,u,g,d,h,q,M,G,r,w,x,v,t,n,F){if(!S[x].autoSlide)return!1;e.autoSlidePause(x);ha[x]=setTimeout(function(){!F.infiniteSlider&&A[x]>r.length-1&&(A[x]-=t);e.changeSlide((A[x]+z[x]+r.length+1)%r.length,b,f,c,u,g,d,h,q,M,G,r,w,x,v,t,n,F);e.autoSlide(b,f,c,u,g,d,h,q,M,G,r,w,x,v, t,n,F)},F.autoSlideTimer+F.autoSlideTransTimer)},autoSlidePause:function(b){clearTimeout(ha[b])},isUnselectable:function(a,e){return""!=e.unselectableSelector&&1==b(a).closest(e.unselectableSelector).size()?!0:!1},slowScrollHorizontalIntervalTimer:function(b,f,c,u,h,d,q,z,A,G,r,w,x,v,t,n,F,m,l,p){return setTimeout(function(){e.slowScrollHorizontalInterval(f,c,u,h,d,q,z,A,G,r,w,x,v,t,n,F,m,l,p)},b)},onSlideCompleteTimer:function(b,f,c,u,h,d){return setTimeout(function(){e.onSlideComplete(f,c,u,h,d)}, b)},hideScrollbarIntervalTimer:function(b,f,c,u,h,d,q,z,A,G){return setTimeout(function(){e.hideScrollbarInterval(f,c,u,h,d,q,z,A,G)},b)},args:function(a,f,c,u,h,d){this.prevSlideNumber=void 0==b(c).parent().data("args")?void 0:b(c).parent().data("args").prevSlideNumber;this.prevSlideObject=void 0==b(c).parent().data("args")?void 0:b(c).parent().data("args").prevSlideObject;this.targetSlideNumber=d+1;this.targetSlideObject=b(c).children(":eq("+this.targetSlideOffset+")");this.slideChanged=!1;"load"== a?this.targetSlideObject=this.targetSlideNumber=void 0:"start"==a?this.targetSlideObject=this.targetSlideNumber=void 0:"change"==a?(this.slideChanged=!0,this.prevSlideNumber=void 0==b(c).parent().data("args")?f.startAtSlide:b(c).parent().data("args").currentSlideNumber,this.prevSlideObject=b(c).children(":eq("+this.prevSlideNumber+")")):"complete"==a&&(this.slideChanged=b(c).parent().data("args").slideChanged);this.settings=f;this.data=b(c).parent().data("iosslider");this.sliderObject=c;this.sliderContainerObject= b(c).parent();this.currentSlideObject=u;this.currentSlideNumber=h+1;this.currentSliderOffset=-1*e.getSliderOffset(c,"x")},preventDrag:function(b){b.preventDefault()},preventClick:function(b){b.stopImmediatePropagation();return!1},enableClick:function(){return!0}};e.setBrowserInfo();var U={init:function(a,f){da=e.has3DTransform();var c=b.extend(!0,{elasticPullResistance:0.6,frictionCoefficient:0.92,elasticFrictionCoefficient:0.6,snapFrictionCoefficient:0.92,snapToChildren:!1,snapSlideCenter:!1,startAtSlide:1, scrollbar:!1,scrollbarDrag:!1,scrollbarHide:!0,scrollbarLocation:"top",scrollbarContainer:"",scrollbarOpacity:0.4,scrollbarHeight:"4px",scrollbarBorder:"0",scrollbarMargin:"5px",scrollbarBackground:"#000",scrollbarBorderRadius:"100px",scrollbarShadow:"0 0 0 #000",scrollbarElasticPullResistance:0.9,desktopClickDrag:!1,keyboardControls:!1,tabToAdvance:!1,responsiveSlideContainer:!0,responsiveSlides:!0,navSlideSelector:"",navPrevSelector:"",navNextSelector:"",autoSlideToggleSelector:"",autoSlide:!1, autoSlideTimer:5E3,autoSlideTransTimer:750,autoSlideHoverPause:!0,infiniteSlider:!1,snapVelocityThreshold:5,slideStartVelocityThreshold:0,horizontalSlideLockThreshold:5,verticalSlideLockThreshold:3,stageCSS:{position:"relative",top:"0",left:"0",overflow:"hidden",zIndex:1},unselectableSelector:"",onSliderLoaded:"",onSliderUpdate:"",onSliderResize:"",onSlideStart:"",onSlideChange:"",onSlideComplete:""},a);void 0==f&&(f=this);return b(f).each(function(a){function f(){e.autoSlidePause(d);ua=b(D).find("a"); ya=b(D).find("[onclick]");oa=b(D).find("*");b(l).css("width","");b(l).css("height","");b(D).css("width","");C=b(D).children().not("script").get();fa=[];L=[];c.responsiveSlides&&b(C).css("width","");q[d]=0;j=[];n=b(l).parent().width();p=b(l).outerWidth(!0);c.responsiveSlideContainer&&(p=b(l).outerWidth(!0)>n?n:b(l).outerWidth(!0));b(l).css({position:c.stageCSS.position,top:c.stageCSS.top,left:c.stageCSS.left,overflow:c.stageCSS.overflow,zIndex:c.stageCSS.zIndex,webkitPerspective:1E3,webkitBackfaceVisibility:"hidden", msTouchAction:"pan-y",width:p});b(c.unselectableSelector).css({cursor:"default"});for(var a=0;a<C.length;a++){fa[a]=b(C[a]).width();L[a]=b(C[a]).outerWidth(!0);var u=L[a];c.responsiveSlides&&(L[a]>p?(u=p+-1*(L[a]-fa[a]),fa[a]=u,L[a]=p):u=fa[a],b(C[a]).css({width:u}));b(C[a]).css({webkitBackfaceVisibility:"hidden",overflow:"hidden",position:"absolute",top:0});j[a]=-1*q[d];q[d]=q[d]+u+(L[a]-fa[a])}c.snapSlideCenter&&(m=0.5*(p-L[0]),c.responsiveSlides&&L[0]>p&&(m=0));ta[d]=2*q[d];for(a=0;a<C.length;a++)e.setSliderOffset(b(C[a]), -1*j[a]+q[d]+m),j[a]-=q[d];if(!c.infiniteSlider&&!c.snapSlideCenter){for(a=0;a<j.length&&!(j[a]<=-1*(2*q[d]-p));a++)ha=a;j.splice(ha+1,j.length);j[j.length]=-1*(2*q[d]-p)}for(a=0;a<j.length;a++)E[a]=j[a];I&&(c.startAtSlide=S[d].startAtSlide>j.length?j.length:S[d].startAtSlide,c.infiniteSlider?(c.startAtSlide=(S[d].startAtSlide-1+H)%H,A[d]=S[d].startAtSlide):(c.startAtSlide=0>S[d].startAtSlide-1?j.length-1:S[d].startAtSlide,A[d]=S[d].startAtSlide-1),aa[d]=A[d]);h[d]=q[d]+m;b(D).css({position:"relative", cursor:ga,webkitPerspective:"0",webkitBackfaceVisibility:"hidden",width:q[d]+"px"});Q=q[d];q[d]=2*q[d]-p+2*m;(X=Q<p||0==p?!0:!1)&&b(D).css({cursor:"default"});F=b(l).parent().outerHeight(!0);s=b(l).height();c.responsiveSlideContainer&&(s=s>F?F:s);b(l).css({height:s});e.setSliderOffset(D,j[A[d]]);if(c.infiniteSlider&&!X){a=e.getSliderOffset(b(D),"x");for(u=-1*((z[d]+H)%H);0>u;){var g=0,y=e.getSliderOffset(b(C[0]),"x");b(C).each(function(b){e.getSliderOffset(this,"x")<y&&(y=e.getSliderOffset(this,"x"), g=b)});var K=h[d]+Q;e.setSliderOffset(b(C)[g],K);h[d]=-1*j[1]+m;q[d]=h[d]+Q-p;j.splice(0,1);j.splice(j.length,0,-1*K+m);u++}for(;0<-1*j[0]-Q+m&&c.snapSlideCenter&&I;){var M=0,N=e.getSliderOffset(b(C[0]),"x");b(C).each(function(b){e.getSliderOffset(this,"x")>N&&(N=e.getSliderOffset(this,"x"),M=b)});K=h[d]-L[M];e.setSliderOffset(b(C)[M],K);j.splice(0,0,-1*K+m);j.splice(j.length-1,1);h[d]=-1*j[0]+m;q[d]=h[d]+Q-p;z[d]--;A[d]++}for(;a<=-1*q[d];)g=0,y=e.getSliderOffset(b(C[0]),"x"),b(C).each(function(b){e.getSliderOffset(this, "x")<y&&(y=e.getSliderOffset(this,"x"),g=b)}),K=h[d]+Q,e.setSliderOffset(b(C)[g],K),h[d]=-1*j[1]+m,q[d]=h[d]+Q-p,j.splice(0,1),j.splice(j.length,0,-1*K+m),z[d]++,A[d]--}e.setSliderOffset(D,j[A[d]]);c.desktopClickDrag||b(D).css({cursor:"default"});c.scrollbar&&(b("."+G).css({margin:c.scrollbarMargin,overflow:"hidden",display:"none"}),b("."+G+" ."+r).css({border:c.scrollbarBorder}),k=parseInt(b("."+G).css("marginLeft"))+parseInt(b("."+G).css("marginRight")),B=parseInt(b("."+G+" ."+r).css("borderLeftWidth"), 10)+parseInt(b("."+G+" ."+r).css("borderRightWidth"),10),v=""!=c.scrollbarContainer?b(c.scrollbarContainer).width():p,t=p/Q*(v-k),c.scrollbarHide||(U=c.scrollbarOpacity),b("."+G).css({position:"absolute",left:0,width:v-k+"px",margin:c.scrollbarMargin}),"top"==c.scrollbarLocation?b("."+G).css("top","0"):b("."+G).css("bottom","0"),b("."+G+" ."+r).css({borderRadius:c.scrollbarBorderRadius,background:c.scrollbarBackground,height:c.scrollbarHeight,width:t-B+"px",minWidth:c.scrollbarHeight,border:c.scrollbarBorder, webkitPerspective:1E3,webkitBackfaceVisibility:"hidden",position:"relative",opacity:U,filter:"alpha(opacity:"+100*U+")",boxShadow:c.scrollbarShadow}),e.setSliderOffset(b("."+G+" ."+r),Math.floor((-1*j[A[d]]-h[d]+m)/(q[d]-h[d]+m)*(v-k-t))),b("."+G).css({display:"block"}),w=b("."+G+" ."+r),x=b("."+G));c.scrollbarDrag&&!X&&b("."+G+" ."+r).css({cursor:ga});c.infiniteSlider&&(R=(q[d]+p)/3);""!=c.navSlideSelector&&b(c.navSlideSelector).each(function(a){b(this).css({cursor:"pointer"});b(this).unbind(O).bind(O, function(f){"touchstart"==f.type?b(this).unbind("click.iosSliderEvent"):b(this).unbind("touchstart.iosSliderEvent");O=f.type+".iosSliderEvent";e.changeSlide(a,D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c)})});""!=c.navPrevSelector&&(b(c.navPrevSelector).css({cursor:"pointer"}),b(c.navPrevSelector).unbind(O).bind(O,function(a){"touchstart"==a.type?b(this).unbind("click.iosSliderEvent"):b(this).unbind("touchstart.iosSliderEvent");O=a.type+".iosSliderEvent";a=(A[d]+z[d]+H)%H;(0<a||c.infiniteSlider)&&e.changeSlide(a- 1,D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c)}));""!=c.navNextSelector&&(b(c.navNextSelector).css({cursor:"pointer"}),b(c.navNextSelector).unbind(O).bind(O,function(a){"touchstart"==a.type?b(this).unbind("click.iosSliderEvent"):b(this).unbind("touchstart.iosSliderEvent");O=a.type+".iosSliderEvent";a=(A[d]+z[d]+H)%H;(a<j.length-1||c.infiniteSlider)&&e.changeSlide(a+1,D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c)}));c.autoSlide&&!X&&""!=c.autoSlideToggleSelector&&(b(c.autoSlideToggleSelector).css({cursor:"pointer"}),b(c.autoSlideToggleSelector).unbind(O).bind(O, function(a){"touchstart"==a.type?b(this).unbind("click.iosSliderEvent"):b(this).unbind("touchstart.iosSliderEvent");O=a.type+".iosSliderEvent";va?(e.autoSlide(D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c),va=!1,b(c.autoSlideToggleSelector).removeClass("on")):(e.autoSlidePause(d),va=!0,b(c.autoSlideToggleSelector).addClass("on"))}));e.autoSlide(D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c);b(l).bind("mouseleave.iosSliderEvent",function(){e.autoSlide(D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c)});b(l).bind("touchend.iosSliderEvent", function(){e.autoSlide(D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c)});c.autoSlidePauseHover&&b(l).bind("mouseenter.iosSliderEvent",function(){e.autoSlidePause(d)});b(l).data("iosslider",{obj:za,settings:c,scrollerNode:D,slideNodes:C,numberOfSlides:H,centeredSlideOffset:m,sliderNumber:d,originalOffsets:E,childrenOffsets:j,sliderMax:q[d],scrollbarClass:r,scrollbarWidth:t,scrollbarStageWidth:v,stageWidth:p,scrollMargin:k,scrollBorder:B,infiniteSliderOffset:z[d],infiniteSliderWidth:R,slideNodeOuterWidths:L});I= !1;return!0}ma++;var d=ma,J=[];S[d]=c;h[d]=0;q[d]=0;var N=[0,0],M=[0,0],G="scrollbarBlock"+ma,r="scrollbar"+ma,w,x,v,t,n,F,m=0,l=b(this),p,s,k,B,y,I=!0;a=-1;var j,E=[],U=0,P=0,da=0,D=b(this).children(":first-child"),C,fa,L,H=b(D).children().not("script").size(),T=!1,ha=0,wa=!1,pa=void 0,R;z[d]=0;var X=!1,va=!1;sa[d]=!1;var Y,qa=!1,ia=!1,O="touchstart.iosSliderEvent click.iosSliderEvent",Q,ua,ya,oa;ea[d]=!1;Z[d]=[];c.scrollbarDrag&&(c.scrollbar=!0,c.scrollbarHide=!1);var za=b(this);if(void 0!=za.data("iosslider"))return!0; var Aa="demo version".split(""),ja=Math.floor(12317*Math.random());b(D).parent().append("<i class = 'i"+ja+"'></i>").append("<i class = 'i"+ja+"'></i>");b(".i"+ja).css({position:"absolute",right:"10px",bottom:"10px",zIndex:1E3,fontStyle:"normal",background:"#fff",opacity:0.2}).eq(1).css({bottom:"auto",right:"auto",top:"10px",left:"10px"});for(a=0;a<Aa.length;a++)b(".i"+ja).html(b(".i"+ja).html()+Aa[a]);b(this).find("img").bind("dragstart.iosSliderEvent",function(b){b.preventDefault()});c.infiniteSlider&& (c.scrollbar=!1);c.infiniteSlider&&1==H&&(c.infiniteSlider=!1);c.scrollbar&&(""!=c.scrollbarContainer?b(c.scrollbarContainer).append("<div class = '"+G+"'><div class = '"+r+"'></div></div>"):b(D).parent().append("<div class = '"+G+"'><div class = '"+r+"'></div></div>"));if(!f())return!0;b(this).find("a").bind("mousedown",e.preventDrag);b(this).find("[onclick]").bind("click",e.preventDrag).each(function(){b(this).data("onclick",this.onclick)});a=e.calcActiveOffset(c,e.getSliderOffset(b(D),"x"),j,p, z[d],H,void 0,d);a=(a+z[d]+H)%H;a=new e.args("load",c,D,b(D).children(":eq("+a+")"),a,a);b(l).data("args",a);if(""!=c.onSliderLoaded)c.onSliderLoaded(a);if(S[d].responsiveSlides||S[d].responsiveSlideContainer)a=Ca?"orientationchange":"resize",b(window).bind(a+".iosSliderEvent-"+d,function(){if(!f())return!0;var a=b(l).data("args");if(""!=c.onSliderResize)c.onSliderResize(a)});(c.keyboardControls||c.tabToAdvance)&&!X&&b(document).bind("keydown.iosSliderEvent",function(b){!$&&!W&&(b=b.originalEvent); if(37==b.keyCode&&c.keyboardControls)b.preventDefault(),b=(A[d]+z[d]+H)%H,(0<b||c.infiniteSlider)&&e.changeSlide(b-1,D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c);else if(39==b.keyCode&&c.keyboardControls||9==b.keyCode&&c.tabToAdvance)b.preventDefault(),b=(A[d]+z[d]+H)%H,(b<j.length-1||c.infiniteSlider)&&e.changeSlide(b+1,D,C,J,r,t,p,v,k,B,E,j,L,d,R,H,m,c)});if(Ba||c.desktopClickDrag){var ba=!1,ka=b(D),la=b(D),xa=!1;c.scrollbarDrag&&(ka=ka.add(w),la=la.add(x));b(ka).bind("mousedown.iosSliderEvent touchstart.iosSliderEvent", function(a){if(ba)return!0;ba=!0;"touchstart"==a.type?b(la).unbind("mousedown.iosSliderEvent"):b(la).unbind("touchstart.iosSliderEvent");if(ea[d]||X||(xa=e.isUnselectable(a.target,c)))return T=ba=!1,!0;Y=b(this)[0]===b(w)[0]?w:D;!$&&!W&&(a=a.originalEvent);e.autoSlidePause(d);oa.unbind(".disableClick");if("touchstart"==a.type)eventX=a.touches[0].pageX,eventY=a.touches[0].pageY;else{if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&& window.getSelection().removeAllRanges();else if(document.selection)if(W)try{document.selection.empty()}catch(f){}else document.selection.empty();eventX=a.pageX;eventY=a.pageY;wa=!0;pa=D;b(this).css({cursor:ra})}N=[0,0];M=[0,0];V=0;T=!1;for(a=0;a<J.length;a++)clearTimeout(J[a]);a=e.getSliderOffset(D,"x");a>-1*h[d]+m+Q?(a=-1*h[d]+m+Q,e.setSliderOffset(b("."+r),a),b("."+r).css({width:t-B+"px"})):a<-1*q[d]&&(e.setSliderOffset(b("."+r),v-k-t),b("."+r).css({width:t-B+"px"}));a=b(this)[0]===b(w)[0]?h[d]: 0;P=-1*(e.getSliderOffset(this,"x")-eventX-a);e.getSliderOffset(this,"y");N[1]=eventX;M[1]=eventY;ia=!1});b(la).bind("touchmove.iosSliderEvent mousemove.iosSliderEvent",function(a){!$&&!W&&(a=a.originalEvent);if(ea[d]||X||xa)return!0;var f=0;if("touchmove"==a.type)eventX=a.touches[0].pageX,eventY=a.touches[0].pageY;else{if(window.getSelection)window.getSelection().empty||window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else if(document.selection)if(W)try{document.selection.empty()}catch(u){}else document.selection.empty(); eventX=a.pageX;eventY=a.pageY;if(!wa||!na&&("undefined"!=typeof a.webkitMovementX||"undefined"!=typeof a.webkitMovementY)&&0===a.webkitMovementY&&0===a.webkitMovementX)return!0}N[0]=N[1];N[1]=eventX;V=(N[1]-N[0])/2;M[0]=M[1];M[1]=eventY;ca=(M[1]-M[0])/2;if(!T){var g=(A[d]+z[d]+H)%H,g=new e.args("start",c,D,b(D).children(":eq("+g+")"),g,void 0);b(l).data("args",g);if(""!=c.onSlideStart)c.onSlideStart(g)}if((ca>c.verticalSlideLockThreshold||ca<-1*c.verticalSlideLockThreshold)&&"touchmove"==a.type&& !T)qa=!0;(V>c.horizontalSlideLockThreshold||V<-1*c.horizontalSlideLockThreshold)&&"touchmove"==a.type&&a.preventDefault();if(V>c.slideStartVelocityThreshold||V<-1*c.slideStartVelocityThreshold)T=!0;if(T&&!qa){var g=e.getSliderOffset(D,"x"),n=b(Y)[0]===b(w)[0]?h[d]:m,s=b(Y)[0]===b(w)[0]?(h[d]-q[d]-m)/(scrollbarStageHeight-k-scrollbarHeight):1,x=b(Y)[0]===b(w)[0]?c.scrollbarElasticPullResistance:c.elasticPullResistance,F=c.snapSlideCenter&&b(Y)[0]===b(w)[0]?0:m,G=c.snapSlideCenter&&b(Y)[0]===b(w)[0]? m:0;"touchmove"==a.type&&(da!=a.touches.length&&(P=-1*g+eventX),da=a.touches.length);if(c.infiniteSlider){if(g<=-1*q[d]){var I=b(D).width();if(g<=-1*ta[d]){var J=-1*E[0];b(C).each(function(a){e.setSliderOffset(b(C)[a],J+m);a<j.length&&(j[a]=-1*J);J+=L[a]});P-=-1*j[0];h[d]=-1*j[0]+m;q[d]=h[d]+I-p;z[d]=0}else{var R=0,S=e.getSliderOffset(b(C[0]),"x");b(C).each(function(b){e.getSliderOffset(this,"x")<S&&(S=e.getSliderOffset(this,"x"),R=b)});x=h[d]+I;e.setSliderOffset(b(C)[R],x);h[d]=-1*j[1]+m;q[d]=h[d]+ I-p;j.splice(0,1);j.splice(j.length,0,-1*x+m);z[d]++}}if(g>=-1*h[d]||0<=g)if(I=b(D).width(),0<=g){J=-1*E[0];b(C).each(function(a){e.setSliderOffset(b(C)[a],J+m);a<j.length&&(j[a]=-1*J);J+=L[a]});P+=-1*j[0];h[d]=-1*j[0]+m;q[d]=h[d]+I-p;for(z[d]=H;0<-1*j[0]-I+m;){var O=0,Q=e.getSliderOffset(b(C[0]),"x");b(C).each(function(b){e.getSliderOffset(this,"x")>Q&&(Q=e.getSliderOffset(this,"x"),O=b)});x=h[d]-L[O];e.setSliderOffset(b(C)[O],x);j.splice(0,0,-1*x+m);j.splice(j.length-1,1);h[d]=-1*j[0]+m;q[d]=h[d]+ I-p;z[d]--;A[d]++}}else O=0,Q=e.getSliderOffset(b(C[0]),"x"),b(C).each(function(b){e.getSliderOffset(this,"x")>Q&&(Q=e.getSliderOffset(this,"x"),O=b)}),x=h[d]-L[O],e.setSliderOffset(b(C)[O],x),j.splice(0,0,-1*x+m),j.splice(j.length-1,1),h[d]=-1*j[0]+m,q[d]=h[d]+I-p,z[d]--}else I=b(D).width(),g>-1*h[d]+m&&(f=-1*(h[d]+-1*(P-n-eventX+F)*s-n)*x/s),g<-1*q[d]&&(f=-1*(q[d]+G+-1*(P-n-eventX)*s-n)*x/s);e.setSliderOffset(D,-1*(P-n-eventX-f)*s-n+G);c.scrollbar&&(e.showScrollbar(c,r),K=Math.floor((P-eventX-f- h[d]+F)/(q[d]-h[d]+m)*(v-k-t)*s),g=t,0>=K?(g=t-B- -1*K,e.setSliderOffset(b("."+r),0),b("."+r).css({width:g+"px"})):K>=v-k-B-t?(g=v-k-B-K,e.setSliderOffset(b("."+r),K),b("."+r).css({width:g+"px"})):e.setSliderOffset(b("."+r),K));"touchmove"==a.type&&(y=a.touches[0].pageX);a=!1;f=e.calcActiveOffset(c,-1*(P-eventX-f),j,p,z[d],H,void 0,d);g=(f+z[d]+H)%H;c.infiniteSlider?g!=aa[d]&&(a=!0):f!=A[d]&&(a=!0);if(a&&(A[d]=f,aa[d]=g,ia=!0,g=new e.args("change",c,D,b(D).children(":eq("+g+")"),g,g),b(l).data("args", g),""!=c.onSlideChange))c.onSlideChange(g)}ba=!1});a=b(window);if(W||$)a=b(document);b(ka).bind("touchend.iosSliderEvent",function(b){b=b.originalEvent;if(ea[d]||X||xa)return!0;if(0!=b.touches.length)for(var a=0;a<b.touches.length;a++)b.touches[a].pageX==y&&e.slowScrollHorizontal(D,C,J,r,V,ca,t,p,v,k,B,E,j,L,d,R,H,Y,ia,m,c);else e.slowScrollHorizontal(D,C,J,r,V,ca,t,p,v,k,B,E,j,L,d,R,H,Y,ia,m,c);ba=qa=!1});b(a).bind("mouseup.iosSliderEvent-"+d,function(){T?ua.unbind("click.disableClick").bind("click.disableClick", e.preventClick):ua.unbind("click.disableClick").bind("click.disableClick",e.enableClick);ya.each(function(){this.onclick=function(a){if(T)return!1;b(this).data("onclick").call(this,a||window.event)}});1.8<=parseFloat(b().jquery)?oa.each(function(){var a=b._data(this,"events");if(void 0!=a&&void 0!=a.click&&"iosSliderEvent"!=a.click[0].namespace){if(!T)return!1;b(this).one("click.disableClick",e.preventClick);var a=b._data(this,"events").click,c=a.pop();a.splice(0,0,c)}}):1.6<=parseFloat(b().jquery)&& oa.each(function(){var a=b(this).data("events");if(void 0!=a&&void 0!=a.click&&"iosSliderEvent"!=a.click[0].namespace){if(!T)return!1;b(this).one("click.disableClick",e.preventClick);var a=b(this).data("events").click,c=a.pop();a.splice(0,0,c)}});if(!sa[d]){if(X)return!0;b(ka).css({cursor:ga});wa=!1;if(void 0==pa)return!0;e.slowScrollHorizontal(pa,C,J,r,V,ca,t,p,v,k,B,E,j,L,d,R,H,Y,ia,m,c);pa=void 0}ba=qa=!1})}})},destroy:function(a,f){void 0==f&&(f=this);return b(f).each(function(){var c=b(this), f=c.data("iosslider");if(void 0==f)return!1;void 0==a&&(a=!0);e.autoSlidePause(f.sliderNumber);sa[f.sliderNumber]=!0;b(window).unbind(".iosSliderEvent-"+f.sliderNumber);b(document).unbind(".iosSliderEvent-"+f.sliderNumber);b(document).unbind("keydown.iosSliderEvent");b(this).unbind(".iosSliderEvent");b(this).children(":first-child").unbind(".iosSliderEvent");b(this).children(":first-child").children().unbind(".iosSliderEvent");a&&(b(this).attr("style",""),b(this).children(":first-child").attr("style", ""),b(this).children(":first-child").children().attr("style",""),b(f.settings.navSlideSelector).attr("style",""),b(f.settings.navPrevSelector).attr("style",""),b(f.settings.navNextSelector).attr("style",""),b(f.settings.autoSlideToggleSelector).attr("style",""),b(f.settings.unselectableSelector).attr("style",""));f.settings.scrollbar&&b(".scrollbarBlock"+f.sliderNumber).remove();for(var f=Z[f.sliderNumber],g=0;g<f.length;g++)clearTimeout(f[g]);c.removeData("iosslider");c.removeData("args")})},update:function(a){void 0== a&&(a=this);return b(a).each(function(){var a=b(this),c=a.data("iosslider");if(void 0==c)return!1;c.settings.startAtSlide=a.data("args").currentSlideNumber;U.destroy(!1,this);1!=c.numberOfSlides&&c.settings.infiniteSlider&&(c.settings.startAtSlide=(A[c.sliderNumber]+1+z[c.sliderNumber]+c.numberOfSlides)%c.numberOfSlides);U.init(c.settings,this);a=new e.args("update",c.settings,c.scrollerNode,b(c.scrollerNode).children(":eq("+(c.settings.startAtSlide-1)+")"),c.settings.startAtSlide-1,c.settings.startAtSlide- 1);b(c.stageNode).data("args",a);if(""!=c.settings.onSliderUpdate)c.settings.onSliderUpdate(a)})},addSlide:function(a,e){return this.each(function(){var c=b(this),h=c.data("iosslider");if(void 0==h)return!1;0==b(h.scrollerNode).children().size()?(b(h.scrollerNode).append(a),c.data("args").currentSlideNumber=1):h.settings.infiniteSlider?(1==e?b(h.scrollerNode).children(":eq(0)").before(a):b(h.scrollerNode).children(":eq("+(e-2)+")").after(a),-1>z[h.sliderNumber]&&A[h.sliderNumber]--,c.data("args").currentSlideNumber>= e&&A[h.sliderNumber]++):(e<=h.numberOfSlides?b(h.scrollerNode).children(":eq("+(e-1)+")").before(a):b(h.scrollerNode).children(":eq("+(e-2)+")").after(a),c.data("args").currentSlideNumber>=e&&c.data("args").currentSlideNumber++);c.data("iosslider").numberOfSlides++;U.update(this)})},removeSlide:function(a){return this.each(function(){var e=b(this).data("iosslider");if(void 0==e)return!1;b(e.scrollerNode).children(":eq("+(a-1)+")").remove();A[e.sliderNumber]>a-1&&A[e.sliderNumber]--;U.update(this)})}, goToSlide:function(a,f){void 0==f&&(f=this);return b(f).each(function(){var c=b(this).data("iosslider");if(void 0==c)return!1;a=a>c.childrenOffsets.length?c.childrenOffsets.length-1:a-1;e.changeSlide(a,b(c.scrollerNode),b(c.slideNodes),Z[c.sliderNumber],c.scrollbarClass,c.scrollbarWidth,c.stageWidth,c.scrollbarStageWidth,c.scrollMargin,c.scrollBorder,c.originalOffsets,c.childrenOffsets,c.slideNodeOuterWidths,c.sliderNumber,c.infiniteSliderWidth,c.numberOfSlides,c.centeredSlideOffset,c.settings);A[c.sliderNumber]= a})},prevSlide:function(){return this.each(function(){var a=b(this).data("iosslider");if(void 0==a)return!1;var f=(A[a.sliderNumber]+z[a.sliderNumber]+a.numberOfSlides)%a.numberOfSlides;(0<f||a.settings.infiniteSlider)&&e.changeSlide(f-1,b(a.scrollerNode),b(a.slideNodes),Z[a.sliderNumber],a.scrollbarClass,a.scrollbarWidth,a.stageWidth,a.scrollbarStageWidth,a.scrollMargin,a.scrollBorder,a.originalOffsets,a.childrenOffsets,a.slideNodeOuterWidths,a.sliderNumber,a.infiniteSliderWidth,a.numberOfSlides, a.centeredSlideOffset,a.settings);A[a.sliderNumber]=f})},nextSlide:function(){return this.each(function(){var a=b(this).data("iosslider");if(void 0==a)return!1;var f=(A[a.sliderNumber]+z[a.sliderNumber]+a.numberOfSlides)%a.numberOfSlides;(f<a.childrenOffsets.length-1||a.settings.infiniteSlider)&&e.changeSlide(f+1,b(a.scrollerNode),b(a.slideNodes),Z[a.sliderNumber],a.scrollbarClass,a.scrollbarWidth,a.stageWidth,a.scrollbarStageWidth,a.scrollMargin,a.scrollBorder,a.originalOffsets,a.childrenOffsets, a.slideNodeOuterWidths,a.sliderNumber,a.infiniteSliderWidth,a.numberOfSlides,a.centeredSlideOffset,a.settings);A[a.sliderNumber]=f})},lock:function(){return this.each(function(){var a=b(this).data("iosslider");if(void 0==a)return!1;ea[a.sliderNumber]=!0})},unlock:function(){return this.each(function(){var a=b(this).data("iosslider");if(void 0==a)return!1;ea[a.sliderNumber]=!1})},getData:function(){return this.each(function(){var a=b(this).data("iosslider");return void 0==a?!1:a})},autoSlidePause:function(){return this.each(function(){var a= b(this).data("iosslider");if(void 0==a)return!1;S[a.sliderNumber].autoSlide=!1;e.autoSlidePause(a.sliderNumber);return a})},autoSlidePlay:function(){return this.each(function(){var a=b(this).data("iosslider");if(void 0==a)return!1;S[a.sliderNumber].autoSlide=!0;e.autoSlide(b(a.scrollerNode),b(a.slideNodes),Z[a.sliderNumber],a.scrollbarClass,a.scrollbarWidth,a.stageWidth,a.scrollbarStageWidth,a.scrollMargin,a.scrollBorder,a.originalOffsets,a.childrenOffsets,a.slideNodeOuterWidths,a.sliderNumber,a.infiniteSliderWidth, a.numberOfSlides,a.centeredSlideOffset,a.settings);return a})}};b.fn.iosSlider=function(a){if(U[a])return U[a].apply(this,Array.prototype.slice.call(arguments,1));if("object"===typeof a||!a)return U.init.apply(this,arguments);b.error("invalid method call!")}})(jQuery);